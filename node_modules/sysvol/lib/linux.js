const spawn = require('child_process').spawn;

const defaultOptions = {
	shell: true
};

exports.getVolume =  () => {
	return new Promise((resolve, reject) => {
		try {
			const command = "amixer get Master | awk '$0~/%/{print $4}' | tr -d '[]%'"
			const ls = spawn(command, [], defaultOptions);
			ls.stdout.on('data', (volume) => {
				resolve(parseInt(volume));
			});
		}
		catch (ex) {
			reject(ex);
		}
	});
};


exports.setVolume = (newVolume) => {
	return new Promise((resolve, reject) => {
		try {
			const command = 'amixer set Master ' + newVolume +'%';

			spawn(command, [], defaultOptions);
			resolve(true);
		}
		catch (ex) {
			reject(ex);
		}
	});
}
