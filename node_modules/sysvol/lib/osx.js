const spawn = require('child_process').spawn;

exports.getVolume =  () => {
	return new Promise((resolve, reject) => {
		try {
			const command = 'output volume of (get volume settings)'
			const ls = spawn('osascript', ['-e', command]);
			ls.stdout.on('data', (volume) => {
				resolve(parseInt(volume));
			});
		}
		catch (ex) {
			reject(ex);
		}
	});
}

exports.setVolume = (newVolume) => {
	return new Promise((resolve, reject) => {
		try {
			const command = 'set volume output volume ' + newVolume;
			spawn('osascript', ['-e', command]);
			resolve(true);
		}
		catch (ex) {
			reject(ex);
		}
	});
}
